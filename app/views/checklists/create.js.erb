<% if @checklist.errors.present? %>
  $('#checklist').html('<%= j render "checklists/add_form", tag: @tag %>');
<% else %>
  $('#checklist').html('<%= j render "checklists/add_form", tag: @tag %>');
  $('#checklist_name').val('');
  $('#checklist_name').focus();
  $('#checklists').addClass('show');
  $('<%= j render "checklists/checklist", checkitem: @checklist %>').appendTo('#checklists-card');
  $('.progress-bar').css('width', '<%= progress @tag.checklists %>');
  $('.progress-bar').text('<%= progress @tag.checklists %>');
  $('.checklist-tag-<%= @tag.id %>').html('<%= j render "checklists/statistic", tag: @tag %>');

  $(".input-box").change(function () {
    $.ajax({
      url: $(this).data('url'),
      type: "PATCH",
      data: {"checklist": {
        "checked": this.checked
      }}
    });
  });
<% end %>
$('#toastr').html('<%= j render "shared/toastr" %>');
